\hypertarget{sailcode__alpha6_8pde}{
\section{/\-Users/allgood38/\-Desktop/qmast/sailcode\-\_\-alpha6/sailcode\-\_\-alpha6.pde \-File \-Reference}
\label{sailcode__alpha6_8pde}\index{/\-Users/allgood38/\-Desktop/qmast/sailcode\-\_\-alpha6/sailcode\-\_\-alpha6.\-pde@{/\-Users/allgood38/\-Desktop/qmast/sailcode\-\_\-alpha6/sailcode\-\_\-alpha6.\-pde}}
}
{\ttfamily \#include \char`\"{}\-Location\-Struct.\-h\char`\"{}}\*
{\ttfamily \#include $<$\-Software\-Serial.\-h$>$}\*
{\ttfamily \#include $<$stdio.\-h$>$}\*
{\ttfamily \#include $<$avr/io.\-h$>$}\*
\-Include dependency graph for sailcode\-\_\-alpha6.pde\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{sailcode__alpha6_8pde__incl}
\end{center}
\end{figure}
\subsection*{\-Defines}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{group__globalconstants_ga2cf0d7fd0783e401cdb0dc31e2179673}{\-T\-A\-C\-K\-I\-N\-G\-\_\-\-A\-N\-G\-L\-E}~40
\begin{DoxyCompactList}\small\item\em \-Boat parameter constants in globalconstants. \end{DoxyCompactList}\item 
\#define \hyperlink{group__globalconstants_ga19af76681fc030672f41555a55f8e8db}{\-M\-A\-R\-K\-\_\-\-D\-I\-S\-T\-A\-N\-C\-E}~4
\begin{DoxyCompactList}\small\item\em \-Course \-Navigation constants. \end{DoxyCompactList}\item 
\#define \hyperlink{group__globalconstants_ga90af33a69f96f733c581db0261bc1676}{\-S\-T\-A\-T\-I\-O\-N\-\_\-\-K\-E\-E\-P\-I\-N\-G\-\_\-\-R\-A\-D\-I\-U\-S}~15
\begin{DoxyCompactList}\small\item\em \-Station keeping navigation constants. \end{DoxyCompactList}\item 
\#define \hyperlink{group__globalconstants_ga0e751f6a929915f9b2ea482bc096d3ca}{\-W\-I\-N\-D\-\_\-\-C\-H\-A\-N\-G\-E\-\_\-\-T\-H\-R\-E\-S\-H\-O\-L\-D}~10
\item 
\#define \hyperlink{group__globalconstants_ga2c1c653e45c4962f05cb6341f359707d}{\-B\-U\-F\-F\-\_\-\-M\-A\-X}~511
\begin{DoxyCompactList}\small\item\em serial data constants \end{DoxyCompactList}\item 
\#define \hyperlink{group__globalconstants_gaa0fe8a3893ebea828d2bb49ef23e3530}{\-D\-E\-G\-R\-E\-E\-\_\-\-T\-O\-\_\-\-M\-I\-N\-U\-T\-E}~60
\begin{DoxyCompactList}\small\item\em \-Calculation constantes. \end{DoxyCompactList}\item 
\#define \hyperlink{group__globalconstants_ga334339ea1bc712a2689665192c02bfad}{\-L\-A\-T\-I\-T\-U\-D\-E\-\_\-\-T\-O\-\_\-\-M\-E\-T\-E\-R}~1855
\begin{DoxyCompactList}\small\item\em \-There are (approximately) 1855 meters in a minute of latitude everywhere; \-This isn't true for longitude, as it depends on the latitude. \end{DoxyCompactList}\item 
\#define \hyperlink{group__globalconstants_ga5944046f3cb8cd99f5f71c1327ef8bc7}{\-L\-O\-N\-G\-I\-T\-U\-D\-E\-\_\-\-T\-O\-\_\-\-M\-E\-T\-E\-R}~1314
\item 
\#define \hyperlink{group__globalconstants_ga1bc4f63dcd0b30d09b7e320d0595695c}{no\-Data\-Bit}~0
\begin{DoxyCompactList}\small\item\em no data, error error bit \end{DoxyCompactList}\item 
\#define \hyperlink{group__globalconstants_gaed67540d9d2621c3a21a0f6eb8b75d01}{old\-Data\-Bit}~1
\begin{DoxyCompactList}\small\item\em there is data, but buffer is full, error bit \end{DoxyCompactList}\item 
\#define \hyperlink{group__globalconstants_gacd110736362ec97d7349dd67b527df39}{checksum\-Bad\-Bit}~2
\begin{DoxyCompactList}\small\item\em indicates checksum fail on data \end{DoxyCompactList}\item 
\#define \hyperlink{group__globalconstants_gae059b25098726f37143284774ef86a07}{two\-Commas\-Bit}~3
\begin{DoxyCompactList}\small\item\em indicates that there were two commas in the data, and it has been discarded and not parsed \end{DoxyCompactList}\item 
\#define \hyperlink{group__globalconstants_ga72f54d1e0beda470c8361ba984148900}{rollover\-Data\-Bit}~4
\begin{DoxyCompactList}\small\item\em \-Indicates data rolled over, not fast enough. \end{DoxyCompactList}\item 
\#define \hyperlink{group__globalconstants_ga69c4923d7bb43a1880f9fbb878bed927}{bad\-Compass\-Data\-Bit}~5
\begin{DoxyCompactList}\small\item\em indicates that strtok did not return \-P\-T\-N\-T\-H\-T\-M, so we probably got bad data \end{DoxyCompactList}\item 
\#define \hyperlink{group__globalconstants_ga808c40e80d82d52b2ceab81282ad35ec}{too\-Much\-Roll\-Bit}~6
\begin{DoxyCompactList}\small\item\em indicates the boat is falling over \end{DoxyCompactList}\item 
\#define \hyperlink{group__globalconstants_ga55cee1ec4df41dd9b7b71c6aa9619bfc}{bad\-Wind\-Data}~7
\begin{DoxyCompactList}\small\item\em indicates an error from the wind sensor \end{DoxyCompactList}\item 
\#define \hyperlink{group__globalconstants_ga5219c41d9ae91432ffb55ec7aeef8873}{bad\-Gps\-Data}~8
\begin{DoxyCompactList}\small\item\em indicates error in gps data \end{DoxyCompactList}\item 
\#define \hyperlink{group__globalconstants_gaaadbf956e6981264e6bf369a08269821}{\-A\-L\-L\-\_\-\-I\-N}~0
\begin{DoxyCompactList}\small\item\em \-Constant which defines when the boat is \char`\"{}\-All In\char`\"{}. \end{DoxyCompactList}\item 
\#define \hyperlink{group__globalconstants_ga074485974be5a03e711020873d83fd90}{\-A\-L\-L\-\_\-\-O\-U\-T}~100
\begin{DoxyCompactList}\small\item\em \-Constant which defines when the boat is \char`\"{}\-All Out\char`\"{}. \end{DoxyCompactList}\item 
\#define \hyperlink{group__globalconstants_gad67ff299260393832da3b34efaaee56a}{reset\-Pin}~8
\begin{DoxyCompactList}\small\item\em \-Pololu reset (digital pin on arduino) \end{DoxyCompactList}\item 
\#define \hyperlink{group__globalconstants_ga38340aff22e726c77f9cf87b5bea10dd}{tx\-Pin}~9
\begin{DoxyCompactList}\small\item\em \-Pololu serial pin (with \-Software\-Serial library) \end{DoxyCompactList}\item 
\#define \hyperlink{group__globalconstants_gac6759acd1da41c55495c6e5ee91e86e9}{\-S\-H\-O\-R\-T\-E\-S\-T\-\_\-\-N\-M\-E\-A}~5
\begin{DoxyCompactList}\small\item\em \-The shortest possible \-N\-M\-E\-A \-String. \end{DoxyCompactList}\item 
\#define \hyperlink{group__globalconstants_ga0038dced6b4ccdfe2ef833cc1965ca73}{\-L\-O\-N\-G\-E\-S\-T\-\_\-\-N\-M\-E\-A}~120
\begin{DoxyCompactList}\small\item\em \-The longest possible \-N\-M\-E\-A \-String. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{\-Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{sailcode__alpha6_8pde_a4fc01d736fe50cf5b977f755b675f11d}{setup} ()
\begin{DoxyCompactList}\small\item\em \-Standard \-Setup function for \-Arduino, set pins and create object instances. \end{DoxyCompactList}\item 
void \hyperlink{sailcode__alpha6_8pde_afe461d27b9c48d5921c00d521181f12f}{loop} ()
\begin{DoxyCompactList}\small\item\em \-Main \-Function, handles menu input and calls the core functions. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{\-Variables}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{group__group1_gaf9d919ceea98cf74d8ee327ca87871ee}{extra\-Wind\-Data} = 0
\begin{DoxyCompactList}\small\item\em \-Contains extra data from the \-Wind \-Sensor. \end{DoxyCompactList}\item 
int \hyperlink{group__group1_gaafded9aee7842e71393cafc5ac68d921}{extra\-Compass\-Data} = 0
\item 
int \hyperlink{group__group1_gaf7ce3159cdebccf941f8db4e70f5764e}{saved\-Wind\-Checksum} = 0
\begin{DoxyCompactList}\small\item\em clear the global saved \-X\-O\-R value \end{DoxyCompactList}\item 
int \hyperlink{group__group1_gabc070e9e6f6449471852bd233593d1d2}{saved\-Wind\-Xor\-State} = 0
\begin{DoxyCompactList}\small\item\em clear the global saved \-X\-O\-Rstate value \end{DoxyCompactList}\item 
int \hyperlink{group__group1_ga6e28e651127135816788318d7b473dc8}{saved\-Compass\-Checksum} = 0
\item 
int \hyperlink{group__group1_ga766482b676879097212dc7aba1450aa0}{saved\-Compass\-Xor\-State} = 0
\item 
char \hyperlink{group__group1_ga5a0e345949d7a23900298d33d0be150c}{extra\-Wind\-Data\-Array} \mbox{[}\-L\-O\-N\-G\-E\-S\-T\-\_\-\-N\-M\-E\-A\mbox{]}
\begin{DoxyCompactList}\small\item\em a buffer to store roll-\/over data in case this data is fetched mid-\/line \end{DoxyCompactList}\item 
char \hyperlink{group__group1_ga87dbc2b6143e295eae5c571f1b5f460d}{extra\-Compass\-Data\-Array} \mbox{[}\-L\-O\-N\-G\-E\-S\-T\-\_\-\-N\-M\-E\-A\mbox{]}
\item 
float \hyperlink{group__group1_gac5682e48513a771560df50e3b213e61a}{heading}
\begin{DoxyCompactList}\small\item\em heading relative to true north, do not use, only updating 2 times a second \end{DoxyCompactList}\item 
float \hyperlink{group__group1_gad20d9e23979c81b96a060830d0d460a6}{deviation}
\begin{DoxyCompactList}\small\item\em deviation relative to true north; do we use this in our calculations? \-Nope \end{DoxyCompactList}\item 
float \hyperlink{group__group1_gaec967762d2c44e3594070dca470ae334}{variance}
\begin{DoxyCompactList}\small\item\em variance relative to true north; do we use this in our calculations? \-Nope \end{DoxyCompactList}\item 
float \hyperlink{group__group1_ga3c5844d05a57a968ed5686a10e4a5af8}{bspeed}
\begin{DoxyCompactList}\small\item\em \-Boat's speed in km/h. \end{DoxyCompactList}\item 
float \hyperlink{group__group1_ga6ebc5b99dfacc747433709383f3bea8c}{bspeedk}
\begin{DoxyCompactList}\small\item\em \-Boat's speed in knots. \end{DoxyCompactList}\item 
float \hyperlink{group__group1_ga6bc5259b7cc1cb6128495b28f55b0a5d}{wind\-\_\-angl}
\begin{DoxyCompactList}\small\item\em wind angle, (relative to boat \-I believe, could be north, check this) \end{DoxyCompactList}\item 
float \hyperlink{group__group1_ga641fd5e4834deb5465b1931b7645457d}{wind\-\_\-velocity}
\begin{DoxyCompactList}\small\item\em wind velocity in knots \end{DoxyCompactList}\item 
float \hyperlink{group__group1_ga4736792191ccbbbb7b3d6933a3302336}{headingc}
\begin{DoxyCompactList}\small\item\em \-Heading from compass. \end{DoxyCompactList}\item 
float \hyperlink{group__group1_ga282e7d4378d4a18a805b8980295ac86c}{pitch}
\begin{DoxyCompactList}\small\item\em pitch \end{DoxyCompactList}\item 
float \hyperlink{group__group1_ga26fd84d522945b6038221d9e38c7cc39}{roll}
\begin{DoxyCompactList}\small\item\em roll \end{DoxyCompactList}\item 
float \hyperlink{group__group1_gaea221e98c9a7c4e63325dc52ab83c14d}{true\-Wind}
\begin{DoxyCompactList}\small\item\em wind direction calculated at checkteck \end{DoxyCompactList}\item 
int \hyperlink{group__group1_ga8b212bdc5d94214c0e3803a696f2f676}{rudder\-Val}
\begin{DoxyCompactList}\small\item\em variables for transmiting data \end{DoxyCompactList}\item 
int \hyperlink{group__group1_ga1fee0a7eb4ae243dcc5afe20f508990e}{jib\-Val}
\begin{DoxyCompactList}\small\item\em variables for transmiting data \end{DoxyCompactList}\item 
int \hyperlink{group__group1_ga3c5dac52b53dc3642a843a7d6a9266ca}{main\-Val}
\begin{DoxyCompactList}\small\item\em variables for transmiting data \end{DoxyCompactList}\item 
float \hyperlink{group__group1_ga8d6cfa64e358c393d2d13c5a9803e052}{heading\-Val}
\begin{DoxyCompactList}\small\item\em where we are going, temporary compass smoothing test \end{DoxyCompactList}\item 
float \hyperlink{group__group1_ga90176c4024ce3ce161b5feda285f97c5}{distance\-Val}
\begin{DoxyCompactList}\small\item\em distance to next waypoint one-\/shots, no averaging, present conditions \end{DoxyCompactList}\item 
float \hyperlink{group__group1_ga3c596663ba52aec96df1f504772914be}{heading\-\_\-newest}
\begin{DoxyCompactList}\small\item\em heading relative to true north \end{DoxyCompactList}\item 
float \hyperlink{group__group1_ga9fcee93bab7f0c81f67b99f8b8597e9c}{wind\-\_\-angl\-\_\-newest}
\begin{DoxyCompactList}\small\item\em wind angle, (relative to boat) \end{DoxyCompactList}\item 
\-Software\-Serial \hyperlink{group__group1_gad08dcd7d87414b8d7f7e9cf2689ea5d8}{servo\-\_\-ser} = \-Software\-Serial(7, tx\-Pin)
\begin{DoxyCompactList}\small\item\em \-Pololu for connecting via a nonbuffered serial port to pololu -\/output only. \end{DoxyCompactList}\item 
int \hyperlink{group__group1_gaf79de3204853b3b4101113683e74cd54}{rudder\-Dir} = -\/1
\begin{DoxyCompactList}\small\item\em global for reversing rudder if we are parking lot testing \end{DoxyCompactList}\item 
int \hyperlink{group__group1_gaf7f8f4a4e39e09fdb5e9f02330ecabef}{points}
\begin{DoxyCompactList}\small\item\em max waypoints selected for travel \end{DoxyCompactList}\item 
int \hyperlink{group__group1_ga2dee8b7fcecc7c2d190e9304b43ea886}{point}
\begin{DoxyCompactList}\small\item\em point for sail to waypoint in menu \end{DoxyCompactList}\item 
int \hyperlink{group__group1_ga9c43dea25777e23791d530b06f6715f1}{current\-Point} = 0
\begin{DoxyCompactList}\small\item\em current waypoint on course of travel \end{DoxyCompactList}\item 
int \hyperlink{group__group1_gac9d865c1411ae815f6b2394c45d604e7}{\-Straight\-Sail\-Direction}
\begin{DoxyCompactList}\small\item\em \-Menu hack globals. \end{DoxyCompactList}\item 
int \hyperlink{group__group1_ga79863a7d6b31d0c89c5050c2cd931cfe}{\-Current\-Selection}
\begin{DoxyCompactList}\small\item\em \-Menu hack globals. \end{DoxyCompactList}\item 
long \hyperlink{group__group1_ga8ad49a66e91d8658c5f1f7dbcbcbbd2f}{start\-Time}
\begin{DoxyCompactList}\small\item\em station-\/keeping global \end{DoxyCompactList}\item 
int \hyperlink{group__group1_gaffc96d075c8796c3d5ef3dc5824c0819}{station\-Counter}
\begin{DoxyCompactList}\small\item\em station-\/keeping global \end{DoxyCompactList}\item 
boolean \hyperlink{group__group1_gaf453f5fa6c0df67707ca308a2fc80ca1}{times\-Up}
\begin{DoxyCompactList}\small\item\em station-\/keeping global \end{DoxyCompactList}\item 
int \hyperlink{group__group1_gabe157ddfb46568e2de8b041f54ac6d98}{\-Station\-Keeping\-Time\-In\-Box} = 270000
\begin{DoxyCompactList}\small\item\em \-The amount of time the boat should stay in the box before leaving (in millis). \end{DoxyCompactList}\item 
boolean \hyperlink{group__group1_gab23a7a79ede8d141fa92f4475d36fb24}{tacking}
\begin{DoxyCompactList}\small\item\em tacking global \end{DoxyCompactList}\item 
int \hyperlink{group__group1_gabdfa4a25e22806c47eebd4c9826ef7a6}{tacking\-Side}
\begin{DoxyCompactList}\small\item\em tacking global. \end{DoxyCompactList}\item 
int \hyperlink{group__group1_ga332365589e9af9d8ec4d1c5663034132}{iron\-Time}
\begin{DoxyCompactList}\small\item\em tacking global \end{DoxyCompactList}\item 
int \hyperlink{group__group1_gab675a39a0c7f0587be9ae6734db7ac80}{error\-Code}
\begin{DoxyCompactList}\small\item\em error code \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{\-Function \-Documentation}
\hypertarget{sailcode__alpha6_8pde_afe461d27b9c48d5921c00d521181f12f}{
\index{sailcode\-\_\-alpha6.\-pde@{sailcode\-\_\-alpha6.\-pde}!loop@{loop}}
\index{loop@{loop}!sailcode_alpha6.pde@{sailcode\-\_\-alpha6.\-pde}}
\subsubsection[{loop}]{\setlength{\rightskip}{0pt plus 5cm}void loop (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}
\label{sailcode__alpha6_8pde_afe461d27b9c48d5921c00d521181f12f}


\-Main \-Function, handles menu input and calls the core functions. 

\-A lot of documentation should probably be written for this, but all \-I know right now is that it contains the switch statement in order to call the functions. if menu returned 0, any updating happened in the menu function itself and we want the code to just keep doing what it was doing before (e.\-g. setting \-R\-C mode)

\-Straight \-Sail towards \-N,\-S,\-E,\-W as 0, 180, 90, 270. \-No sail control.

\-Straightsail can no longer be called in isolation, needs sailto\-Waypoint which keeps track of when tacking is necessary

stationskeeps around a single spot in the middle of the square 

\-Definition at line 311 of file sailcode\-\_\-alpha6.\-pde.



\-Here is the call graph for this function\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{sailcode__alpha6_8pde_afe461d27b9c48d5921c00d521181f12f_cgraph}
\end{center}
\end{figure}


\hypertarget{sailcode__alpha6_8pde_a4fc01d736fe50cf5b977f755b675f11d}{
\index{sailcode\-\_\-alpha6.\-pde@{sailcode\-\_\-alpha6.\-pde}!setup@{setup}}
\index{setup@{setup}!sailcode_alpha6.pde@{sailcode\-\_\-alpha6.\-pde}}
\subsubsection[{setup}]{\setlength{\rightskip}{0pt plus 5cm}void setup (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}
\label{sailcode__alpha6_8pde_a4fc01d736fe50cf5b977f755b675f11d}


\-Standard \-Setup function for \-Arduino, set pins and create object instances. 

\-The setup function is the first function to be called. \-When it exits, the loop function is immediately called, where the program remains.

\-Also sets up the compass through serial commands.

\begin{DoxyWarning}{\-Warning}
\-In order for \-Pololu to work, it needs to be manually reset within the code. \-Because of this, a 2 second delay is present to allow the board to start-\/up before the reset occurs. 
\end{DoxyWarning}
\-Change wind to send 5 times a second default for now, need to make sure we can get everything out of the buffer

\-Definition at line 230 of file sailcode\-\_\-alpha6.\-pde.



\-Here is the call graph for this function\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=328pt]{sailcode__alpha6_8pde_a4fc01d736fe50cf5b977f755b675f11d_cgraph}
\end{center}
\end{figure}


